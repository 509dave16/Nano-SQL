!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(7),o=n(6);t.Promise="undefined"!=typeof window&&window.Promise?window.Promise:"undefined"!=typeof global&&global.Promise?global.Promise:r.Promise,t.stopWords=["a","about","after","all","also","am","an","and","andor","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","had","has","have","he","her","here","him","himself","his","how","i","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","see","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your"],t._assign=function(e){return e?JSON.parse(JSON.stringify(e)):null},t.fastCHAIN=function(e,n){return new t.Promise(function(t,i){if(e&&e.length){var o=[],s=function(){o.length<e.length?n(e[o.length],o.length,function(e){o.push(e),r.setFast(s)}):t(o)};s()}else t([])})},t.fastRACE=function(e,n){return new t.Promise(function(t,r){if(e&&e.length){var i=!1,o=0,s=function(){o<e.length&&(n(e[o],o,function(e){i||(i=!0,t([e]))}),o++,s())};s()}else t([])})},t.fastALL=function(e,n){return t.Promise.all((e||[]).map(function(e,r){return new t.Promise(function(t,i){n(e,r,function(e){t(e)})})}))};var s="undefined"==typeof window?"":navigator.userAgent||"";t.isSafari=0!==s.length&&(/^((?!chrome|android).)*safari/i.test(s)||/iPad|iPhone|iPod/.test(s)&&!window.MSStream),t.isMSBrowser=0!==s.length&&(s.indexOf("MSIE ")>0||s.indexOf("Trident/")>0||s.indexOf("Edge/")>0),t.isAndroid=/Android/.test(s),t.random16Bits=function(){if("undefined"==typeof crypto)return Math.round(Math.random()*Math.pow(2,16));if(crypto.getRandomValues){var e=new Uint16Array(1);return crypto.getRandomValues(e),e[0]}return"undefined"!=typeof global&&global._crypto.randomBytes?global._crypto.randomBytes(2).reduce(function(e,t){return t*e}):Math.round(Math.random()*Math.pow(2,16))},t.tokenizer=function(e,n,r,s,a){var u=function(e){return!e||1===String(e).length||-1!==t.stopWords.indexOf(e)},c=(s||"").toLowerCase().replace(/(\d+)\/(\d+)|(?:\d+(?:,\d+)*|\d+)(?:\.\d+)?/gim,function(e,t,n){return t||n?(parseInt(t)/parseInt(n)).toFixed(a||4):parseFloat(e.replace(/\,/gim,"")).toFixed(a||4)}).replace(/\-|\_|\[|\]|\(|\)|\{|\}|\r?\n|\r|\t/gim," ").replace(/[^\w\s]|(\d\.)/gim,"$1").replace(/\s+/g," ").split(" ");switch(r[1]){case"english":return c.map(function(e,t){return{i:t,o:e,w:isNaN(e)?u(e)?"":i(o(e)):e}});case"english-stem":return c.map(function(e,t){return{i:t,o:e,w:isNaN(e)?u(e)?"":o(e):e}});case"english-meta":return c.map(function(e,t){return{i:t,o:e,w:isNaN(e)?u(e)?"":i(e):e}})}return c.map(function(e,t){return{o:e,w:e,i:t}})},t.timeid=function(e){for(var n=Math.round((new Date).getTime()/(e?1:1e3)).toString();n.length<(e?13:10);)n="0"+n;return n+"-"+(t.random16Bits()+t.random16Bits()).toString(16)},t.intersect=function(e,t){return!(!e||!t)&&!(!e.length||!t.length)&&(e||[]).filter(function(e){return-1!==(t||[]).indexOf(e)}).length>0},t.uuid=function(){var e,n,r="";return[r,r,r,r,r,r,r,r].reduce(function(i,o,s){for(e=t.random16Bits(),n=3===s?4:4===s?(e%16&3|8).toString(16):r,e=e.toString(16);e.length<4;)e="0"+e;return i+([2,3,4,5].indexOf(s)>-1?"-":r)+(n+e).slice(0,4)},r)};var a={int:function(e){return e},uuid:t.uuid,timeId:function(){return t.timeid()},timeIdms:function(){return t.timeid(!0)}};t.hash=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString(16)},t.generateID=function(e,t){return a[e]?a[e](t||1):""},t.cleanArgs=function(e,n){for(var r={},i=e.length;i--;){var o=e[i].split(":");o.length>1?r[o[0]]=t.cast(o[1],n[o[0]]||void 0):r[o[0]]=n[o[0]]||void 0}return r},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.cast=function(e,n){if("any"===e||"blob"===e)return n;var r=typeof n;if("undefined"===r||null===n)return n;var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},o=function(e,n){switch(e){case"safestr":return o("string",n).replace(/[&<>"'`=\/]/gim,function(e){return i[e]});case"int":return"number"!==r||n%1!=0?parseInt(n||0):n;case"number":case"float":return"number"!==r?parseFloat(n||0):n;case"any[]":case"array":return Array.isArray(n)?n:[];case"uuid":case"timeId":case"timeIdms":case"string":return"string"!==r?String(n):n;case"object":case"obj":case"map":return t.isObject(n)?n:{};case"boolean":case"bool":return!0===n}return n},s=o(String(e||"").toLowerCase(),n);if(-1!==e.indexOf("[]")){var a=e.slice(0,e.lastIndexOf("[]"));return(n||[]).map(function(e){return t.cast(a,e)})}return void 0!==s?["int","float","number"].indexOf(e)>-1&&isNaN(s)?0:s:void 0},t.binarySearch=function(e,n,r,i){var o=r||0,s=i||e.length;if(e[o]>n)return o;if(e[s]<n)return s+1;var a=Math.floor((o+s)/2);return n===e[a]?a:s-1===o?s:n>e[a]?t.binarySearch(e,n,a,s):n<e[a]?t.binarySearch(e,n,o,a):s},t.removeDuplicates=function(e){if(!e.length)return[];for(var t=[e[0]],n=1;n<e.length;n++)e[n]!==e[n-1]&&t.push(e[n]);return t},t.deepFreeze=function(e){return Object.getOwnPropertyNames(e||{}).forEach(function(n){var r=e[n];"object"==typeof r&&null!==r&&(e[n]=t.deepFreeze(r))}),Object.freeze(e)},t.crowDistance=function(e,t,n,r,i){void 0===i&&(i=6371);var o=function(e){return e*(Math.PI/180)},s=o(n-e),a=o(r-t),u=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o(e))*Math.cos(o(n))*Math.sin(a/2)*Math.sin(a/2);return i*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))};var u={};t.objQuery=function(e,t,n){var r=function(e,t,n){return e[t]&&n?r(e,t+1,n[e[t]]):n},i=e+(n?"1":"0");if(u[i])return r(u[i],0,t);var o=[];if(o=e.indexOf("[")>-1?[].concat.apply([],e.split(".").map(function(e){return e.match(/([^\[]+)|\[([^\]]+)\]\[/gim)||e})).map(function(e){return e.replace(/\[|\]/gim,"")}):e.split("."),n){var s=o.shift()+"."+o.shift();o.unshift(s)}return u[i]=o,r(u[i],0,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=0,i={},o=Array.prototype.slice,s="undefined"!=typeof window&&window.setImmediate?window.setImmediate:!("undefined"==typeof global||!global.setImmediate)&&global.setImmediate,a="undefined"!=typeof window&&window.postMessage&&window.addEventListener,u="undefined"!=typeof window&&window.Promise?window.Promise:!("undefined"==typeof global||!global.Promise)&&global.Promise,c=function(e){return e[0].apply(null,o.call(e,1))};a&&window.addEventListener("message",function(e){var t,n=e.data;"string"==typeof n&&0===n.indexOf("setMsg")&&(t=i[n])&&(delete i[n],c(t))});t.setFast=s?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s(function(){c(e)})}:u?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.resolve().then(function(){c(e)})}:a?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r++,o="setMsg"+n;return i[o]=e,window.postMessage(o,"*"),n}:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];setTimeout(function(){c(e)},0)};var f=function(){},d=["R"],l=["F"],h=["P"],p=function(){function e(e){this._state=h,this._queue=[],this._outcome=void 0,e!==f&&b(this,e)}return e.doPolyFill=function(){"undefined"!=typeof global&&(global.Promise||(global.Promise=this)),"undefined"!=typeof window&&(window.Promise||(window.Promise=this))},e.prototype.catch=function(e){return this.then(function(){},e)},e.prototype.then=function(t,n){if("function"!=typeof t&&this._state===l||"function"!=typeof n&&this._state===d)return this;var r=new e(f);return this._state!==h?m(r,this._state===l?t:n,this._outcome):this._queue.push(new y(r,t,n)),r},e.resolve=function(t){return t instanceof this?t:g._resolve(new e(f),t)},e.reject=function(t){return g._reject(new e(f),t)},e.all=function(t){return new e(function(e,n){var r=[];if(t.length)for(var i=function(n,i,o){void 0!==o?r.push(o):r.push(i),r.length==t.length&&e(r)},o=function(e){t[e].then(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i(0,e,void 0)}).catch(function(e){i(0,void 0,e)})},s=0;s<t.length;s++)o(s);else e([])})},e.race=function(t){var n,r=t.length,i=!1,o=-1,s=new e(f);if(!1!==Array.isArray(t))return this.reject(new TypeError);if(!r)return this.resolve([]);for(;++o<r;)n=t[o],this.resolve(n).then(function(e){i||(i=!0,g._resolve(s,e))},function(e){i||(i=!0,g._reject(s,e))});return s},e}();t.Promise=p;var y=function(){function e(e,t,n){this._promise=e,"function"==typeof t&&(this._onFulfilled=t,this._callFulfilled=this._otherCallFulfilled),"function"==typeof n&&(this._onRejected=n,this._callRejected=this._otherCallRejected)}return e.prototype._callFulfilled=function(e){g._resolve(this._promise,e)},e.prototype._otherCallFulfilled=function(e){m(this._promise,this._onFulfilled,e)},e.prototype._callRejected=function(e){g._reject(this._promise,e)},e.prototype._otherCallRejected=function(e){m(this._promise,this._onRejected,e)},e}();function m(e,n,r){t.setFast(function(){var t;try{t=n.apply(null,r)}catch(t){return g._reject(e,t)}return t===e?g._reject(e,new TypeError):g._resolve(e,t),null})}t._QueueItem=y;var g=function(){function e(){}return e._resolve=function(t,n){var r=v(_,n),i=r._value,o=-1,s=t._queue.length;if("error"===r._status)return e._reject(t,r._value);if(i)b(t,i);else for(t._state=l,t._outcome=n;++o<s;)t._queue[o]._callFulfilled(n);return t},e._reject=function(e,t){e._state=d,e._outcome=t;for(var n=-1,r=e._queue.length;++n<r;)e._queue[n]._callRejected(t);return e},e}();function _(e){var t=e&&e.then;return!e||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof t?null:function(){t.apply(e,arguments)}}function b(e,t){var n=!1;function r(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n||(n=!0,g._reject(e,t))}function i(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n||(n=!0,g._resolve(e,t))}var o=v(function(){t(i,r)});"error"===o._status&&r(o._value)}function v(e,t){var n={_status:null,_value:null};try{n._value=e(t),n._status="success"}catch(e){n._status="error",n._value=e}return n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(){this._sorted=[],this._exists={},this.ai=1,this.sortIndex=!0,this.doAI=!1}return e.prototype.set=function(e){var t=this;this._sorted=e||[],this._exists={},this._sorted.forEach(function(e,n){t._exists[String(e)]=!0}),this.doAI&&this._sorted.length&&(this.ai=this._sorted[this._sorted.length-1]+1)},e.prototype.getLocation=function(e,t){var n=this.indexOf(e);return-1!==n?n:this.sortIndex?r.binarySearch(this._sorted,e,t):r.binarySearch(this._sorted.sort(function(e,t){return e>t?1:-1}),e,t)},e.prototype.add=function(e){if(!this._exists[String(e)])if(this._exists[String(e)]=!0,this.doAI)parseInt(e)>=this.ai&&this.ai++,this._sorted.push(e);else if(this.sortIndex){var t=r.binarySearch(this._sorted,e);this._sorted.splice(t,0,e)}else this._sorted.push(e)},e.prototype.keys=function(){return this._sorted},e.prototype.indexOf=function(e){return this._exists[String(e)]?this.sortIndex?r.binarySearch(this._sorted,e):this._sorted.indexOf(e):-1},e.prototype.remove=function(e){if(this._exists[String(e)]){var t=this.indexOf(e);this._exists[String(e)]=!1,this._sorted.splice(t,1)}},e}();t.DatabaseIndex=i},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),s=n(2),a=function(){function e(e){this._pkKey={},this._pkType={},this._dbIndex={},this._size=1e3*(e||0)*1e3}return e.prototype.setID=function(e){this._id=e},e.prototype.connect=function(e){var t=this;this._db=window.openDatabase(this._id,"1.0",this._id,this._size||o.isAndroid?5e6:1),o.fastALL(Object.keys(this._pkKey),function(e,n,r){t._sql(!0,"CREATE TABLE IF NOT EXISTS "+e+" (id BLOB PRIMARY KEY UNIQUE, data TEXT)",[],function(){t._sql(!1,"SELECT id FROM "+e,[],function(n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o).id);t._dbIndex[e].sortIndex&&(i=i.sort(function(e,t){return e>t?1:-1})),t._dbIndex[e].set(i),r()})})}).then(e)},e.prototype._chkTable=function(e){if(-1===Object.keys(this._pkType).indexOf(e))throw Error("No table "+e+" found!");return e},e.prototype.makeTable=function(e,t){var n=this;this._dbIndex[e]=new s.DatabaseIndex,t.forEach(function(t){t.props&&o.intersect(["pk","pk()"],t.props)&&(n._pkType[e]=t.type,n._pkKey[e]=t.key,t.props&&o.intersect(["ai","ai()"],t.props)&&("int"===t.type||"number"===t.type)&&(n._dbIndex[e].doAI=!0),(t.props&&o.intersect(["ns","ns()"],t.props)||-1!==["uuid","timeId","timeIdms"].indexOf(n._pkType[e]))&&(n._dbIndex[e].sortIndex=!1))})},e.prototype._sql=function(e,t,n,r){var i=function(e){e.executeSql(t,n,function(e,t){r(t)},function(e,r){return console.error(t,n,r),!1})};e?this._db.transaction(i):this._db.readTransaction(i)},e.prototype.write=function(e,t,n,i){if(!(t=t||o.generateID(this._pkType[e],this._dbIndex[e].ai)))throw new Error("nSQL: Can't add a row without a primary key!");var s,a,u=!1;if(-1===this._dbIndex[e].indexOf(t)&&(u=!0,this._dbIndex[e].add(t)),u){var c=r({},n,((s={})[this._pkKey[e]]=t,s));this._sql(!0,"INSERT into "+this._chkTable(e)+" (id, data) VALUES (?, ?)",[t,JSON.stringify(c)],function(e){i(c)})}else{var f=r({},n,((a={})[this._pkKey[e]]=t,a));this._sql(!0,"UPDATE "+this._chkTable(e)+" SET data = ? WHERE id = ?",[JSON.stringify(f),t],function(){i(f)})}},e.prototype.delete=function(e,t,n){-1!==this._dbIndex[e].indexOf(t)&&this._dbIndex[e].remove(t),this._sql(!0,"DELETE FROM "+this._chkTable(e)+" WHERE id = ?",[t],function(){n()})},e.prototype.read=function(e,t,n){this._sql(!1,"SELECT data FROM "+this._chkTable(e)+" WHERE id = ?",[t],function(e){e.rows.length?n(JSON.parse(e.rows.item(0).data)):n(void 0)})},e.prototype.batchRead=function(e,t,n){this._sql(!1,"SELECT data from "+this._chkTable(e)+" WHERE id IN ("+t.map(function(e){return"?"}).join(", ")+") ORDER BY id",t,function(e){for(var t=e.rows.length,r=[];t--;)r.unshift(JSON.parse(e.rows.item(t).data));n(r)})},e.prototype.rangeRead=function(e,t,n,r,o,s){var a=this,u=this._dbIndex[e].keys(),c=-1===[typeof r,typeof o].indexOf("undefined"),f=c?[r,o]:[];if(u.length){s&&c&&(f=f.map(function(t){return a._dbIndex[e].getLocation(t)})),!1===this._dbIndex[e].sortIndex&&(u=u.sort());var d=f[0]||0,l=[],h=f[0],p="SELECT data from "+this._chkTable(e);if(f.length){for(u[h];h<=f[1];)l.push(u[h]),h++;p+=" WHERE id IN ("+l.map(function(e){return"?"}).join(", ")+")"}p+=" ORDER BY id",this._sql(!1,p,l,function(e){var r=0,o=function(){e.rows.length>r?t(JSON.parse(e.rows.item(r).data),d,function(){d++,++r%500==0?i.setFast(o):o()}):n()};o()})}else n()},e.prototype.drop=function(e,t){var n=new s.DatabaseIndex;n.doAI=this._dbIndex[e].doAI,n.sortIndex=this._dbIndex[e].sortIndex,this._dbIndex[e]=n,this._sql(!0,"DELETE FROM "+this._chkTable(e),[],function(e){t()})},e.prototype.getIndex=function(e,t,n){n(t?this._dbIndex[e].keys().length:this._dbIndex[e].keys())},e.prototype.destroy=function(e){var t=this;o.fastALL(Object.keys(this._dbIndex),function(e,n,r){t.drop(e,r)}).then(e)},e}();t._WebSQLStore=a},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),s=n(2),a=function(){function e(){this._pkKey={},this._pkType={},this._dbIndex={}}return e.prototype.onError=function(e){throw console.error(e),new Error("nSQL: IndexedDB Error!")},e.prototype.connect=function(e){var t=this,n=indexedDB.open(this._id,1),r=!1,i={};n.onerror=this.onError,n.onupgradeneeded=function(e){r=!0,t._db=e.target.result,Object.keys(t._dbIndex).forEach(function(e){t._db.createObjectStore(e,{keyPath:t._pkKey[e]}),i[e]=[]})},n.onsuccess=function(n){t._db=n.target.result,r?e():o.fastALL(Object.keys(t._dbIndex),function(e,n,r){var i,o,s;i=e,o=function(n){t._dbIndex[e].set(n),r()},s=[],t.store(i,"readonly",function(e,n){var r=n.openCursor();r.onsuccess=function(e){var t=e.target.result;t&&(s.push(t.key),t.continue())},r.onerror=t.onError,e.oncomplete=function(){o(s)}})}).then(function(){e()})}},e.prototype.store=function(e,t,n){var r=this._db.transaction(e,t);r.onabort=this.onError,r.onerror=this.onError,n(r,r.objectStore(e))},e.prototype.setID=function(e){this._id=e},e.prototype.makeTable=function(e,t){var n=this;this._dbIndex[e]=new s.DatabaseIndex,t.forEach(function(t){t.props&&o.intersect(["pk","pk()"],t.props)&&(n._pkType[e]=t.type,n._pkKey[e]=t.key,t.props&&o.intersect(["ai","ai()"],t.props)&&("int"===t.type||"number"===t.type)&&(n._dbIndex[e].doAI=!0),(t.props&&o.intersect(["ns","ns()"],t.props)||-1!==["uuid","timeId","timeIdms"].indexOf(n._pkType[e]))&&(n._dbIndex[e].sortIndex=!1))})},e.prototype.write=function(e,t,n,i){var s=this;if(!(t=t||o.generateID(this._pkType[e],this._dbIndex[e].ai)))throw new Error("nSQL: Can't add a row without a primary key!");-1===this._dbIndex[e].indexOf(t)&&this._dbIndex[e].add(t);var a,u=r({},n,((a={})[this._pkKey[e]]=t,a));this.store(e,"readwrite",function(e,t){var n=t.put(u);n.onerror=s.onError,n.onsuccess=function(e){i(u)}})},e.prototype.delete=function(e,t,n){var r=this;-1!==this._dbIndex[e].indexOf(t)&&this._dbIndex[e].remove(t),this.store(e,"readwrite",function(e,i){var o="_clear_"===t?i.clear():i.delete(t);o.onerror=r.onError,o.onsuccess=function(e){n()}})},e.prototype.read=function(e,t,n){var r=this;-1!==this._dbIndex[e].indexOf(t)?this.store(e,"readonly",function(e,i){var o=i.get(t);o.onerror=r.onError,o.onsuccess=function(){n(o.result)}}):n(null)},e.prototype.rangeRead=function(e,t,n,r,o,s){var a=this,u=this._dbIndex[e].keys(),c=-1===[typeof r,typeof o].indexOf("undefined"),f=c?[r,o]:[0,u.length-1];if(u.length){!1===this._dbIndex[e].sortIndex&&(u=u.sort());var d=s&&c?r:u[f[0]],l=s&&c?o:u[f[1]];this.store(e,"readonly",function(e,r){var o=[],s=c?r.openCursor(IDBKeyRange.bound(d,l)):r.openCursor();e.oncomplete=function(e){var r=0,s=function(){o[r]?t(o[r],r,function(){++r%500==0?i.setFast(s):s()}):n()};s()},s.onsuccess=function(e){var t=e.target.result;t&&(o.push(t.value),t.continue())},s.onerror=a.onError})}else n()},e.prototype.drop=function(e,t){var n=new s.DatabaseIndex;n.doAI=this._dbIndex[e].doAI,n.sortIndex=this._dbIndex[e].sortIndex,this._dbIndex[e]=n,this.delete(e,"_clear_",function(){t()})},e.prototype.getIndex=function(e,t,n){n(t?this._dbIndex[e].keys().length:this._dbIndex[e].keys())},e.prototype.destroy=function(e){var t=this;o.fastALL(Object.keys(this._dbIndex),function(e,n,r){t.drop(e,r)}).then(e)},e}();t._IndexedDBStore=a},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),s=n(2),a=function(){function e(e){this._pkKey={},this._pkType={},this._rows={},this._dbIndex={},this._ls=e||!1}return e.prototype.connect=function(e){e()},e.prototype.setID=function(e){this._id=e},e.prototype.makeTable=function(e,t){var n=this;this._rows[e]={},this._dbIndex[e]=new s.DatabaseIndex,t.forEach(function(t){if(t.props&&o.intersect(["pk","pk()"],t.props)&&(n._pkType[e]=t.type,n._pkKey[e]=t.key,t.props&&o.intersect(["ai","ai()"],t.props)&&("int"===t.type||"number"===t.type)&&(n._dbIndex[e].doAI=!0),(t.props&&o.intersect(["ns","ns()"],t.props)||-1!==["uuid","timeId","timeIdms"].indexOf(n._pkType[e]))&&(n._dbIndex[e].sortIndex=!1),n._ls)){var r=localStorage.getItem(n._id+"*"+e+"_idx");r&&n._dbIndex[e].set(JSON.parse(r))}})},e.prototype.write=function(e,t,n,i){if(!(t=t||o.generateID(this._pkType[e],this._dbIndex[e].ai)))throw new Error("nSQL: Can't add a row without a primary key!");if(-1===this._dbIndex[e].indexOf(t)&&(this._dbIndex[e].add(t),this._ls&&localStorage.setItem(this._id+"*"+e+"_idx",JSON.stringify(this._dbIndex[e].keys()))),this._ls){var s=r({},n,((a={})[this._pkKey[e]]=t,a));localStorage.setItem(this._id+"*"+e+"__"+t,JSON.stringify(s)),i(s)}else s=r({},n,((u={})[this._pkKey[e]]=t,u)),this._rows[e][t]=o.deepFreeze(s),i(s);var a,u},e.prototype.delete=function(e,t,n){-1!==this._dbIndex[e].indexOf(t)&&(this._dbIndex[e].remove(t),this._ls&&localStorage.setItem(this._id+"*"+e+"_idx",JSON.stringify(this._dbIndex[e].keys()))),this._ls?localStorage.removeItem(this._id+"*"+e+"__"+t):delete this._rows[e][t],n()},e.prototype.read=function(e,t,n){if(this._ls){var r=localStorage.getItem(this._id+"*"+e+"__"+t);n(r?JSON.parse(r):void 0)}else n(this._rows[e][t])},e.prototype.rangeRead=function(e,t,n,r,o,s){var a=this,u=this._dbIndex[e].keys(),c=-1===[typeof r,typeof o].indexOf("undefined"),f=c?[r,o]:[0,u.length-1];if(u.length){!1===this._dbIndex[e].sortIndex&&(u=u.sort()),s&&c&&(f=f.map(function(t){var n=a._dbIndex[e].indexOf(t);return-1!==n?n:a._dbIndex[e].getLocation(t)}));var d=f[0],l=0,h=function(){d++,++l%500==0?i.setFast(p):p()},p=function(){if(d<=f[1])if(a._ls){var r=localStorage.getItem(a._id+"*"+e+"__"+u[d]);t(r?JSON.parse(r):void 0,d,h)}else t(a._rows[e][u[d]],d,h);else n()};p()}else n()},e.prototype.drop=function(e,t){var n=this;this._ls?(localStorage.setItem(this._id+"*"+e+"_idx",JSON.stringify([])),this._dbIndex[e].keys().forEach(function(t){localStorage.removeItem(n._id+"*"+e+"__"+t)})):this._rows[e]={};var r=new s.DatabaseIndex;r.doAI=this._dbIndex[e].doAI,r.sortIndex=this._dbIndex[e].sortIndex,this._dbIndex[e]=r,t()},e.prototype.getIndex=function(e,t,n){n(t?this._dbIndex[e].keys().length:this._dbIndex[e].keys())},e.prototype.destroy=function(e){var t=this;o.fastALL(Object.keys(this._dbIndex),function(e,n,r){t.drop(e,r)}).then(e)},e}();t._SyncStore=a},function(e,t,n){"use strict";e.exports=function(e){var t,n;return(e=String(e).toLowerCase()).length<3?e:(e.charCodeAt(0)===r&&(t=!0,e="Y"+e.substr(1)),b.test(e)?e=e.substr(0,e.length-2):_.test(e)&&(e=e.substr(0,e.length-1)),(n=g.exec(e))?s.test(n[1])&&(e=e.substr(0,e.length-1)):(n=y.exec(e))&&c.test(n[1])&&(e=n[1],m.test(e)?e+="e":v.test(e)?e=e.substr(0,e.length-1):f.test(e)&&(e+="e")),(n=h.exec(e))&&c.test(n[1])&&(e=n[1]+"i"),(n=w.exec(e))&&s.test(n[1])&&(e=n[1]+i[n[2]]),(n=x.exec(e))&&s.test(n[1])&&(e=n[1]+o[n[2]]),(n=I.exec(e))?u.test(n[1])&&(e=n[1]):(n=p.exec(e))&&u.test(n[1])&&(e=n[1]),(n=l.exec(e))&&(u.test(n[1])||a.test(n[1])&&!f.test(n[1]))&&(e=n[1]),d.test(e)&&u.test(e)&&(e=e.substr(0,e.length-1)),t&&(e="y"+e.substr(1)),e)};var r="y".charCodeAt(0),i={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},o={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},s=new RegExp("^([^aeiou][^aeiouy]*)?([aeiouy][aeiou]*)([^aeiou][^aeiouy]*)"),a=new RegExp("^([^aeiou][^aeiouy]*)?([aeiouy][aeiou]*)([^aeiou][^aeiouy]*)([aeiouy][aeiou]*)?$"),u=new RegExp("^([^aeiou][^aeiouy]*)?(([aeiouy][aeiou]*)([^aeiou][^aeiouy]*)){2,}"),c=new RegExp("^([^aeiou][^aeiouy]*)?[aeiouy]"),f=new RegExp("^([^aeiou][^aeiouy]*)[aeiouy][^aeiouwxy]$"),d=/ll$/,l=/^(.+?)e$/,h=/^(.+?)y$/,p=/^(.+?(s|t))(ion)$/,y=/^(.+?)(ed|ing)$/,m=/(at|bl|iz)$/,g=/^(.+?)eed$/,_=/^.+?[^s]s$/,b=/^.+?(ss|i)es$/,v=/([^aeiouylsz])\1$/,w=new RegExp("^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$"),x=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,I=new RegExp("^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$")},function(e,t,n){"use strict";e.exports=function(e){var t,n,f,d,l="",h=0;function p(e){l+=e}function y(t){return e.charAt(h+t).toUpperCase()}function m(e){return function(){return y(e)}}if(!(e=String(e||"")))return"";for(n=m(1),f=m(0),d=m(-1);!c(f());){if(!f())return"";h++}switch(f()){case"A":"E"===n()?(p("E"),h+=2):(p("A"),h++);break;case"G":case"K":case"P":"N"===n()&&(p("N"),h+=2);break;case"W":"R"===n()?(p(n()),h+=2):"H"===n()?(p(f()),h+=2):a(n())&&(p("W"),h+=2);break;case"X":p("S"),h++;break;case"E":case"I":case"O":case"U":p(f()),h++}for(;f();)if(t=1,!c(f())||f()===d()&&"C"!==f())h+=t;else{switch(f()){case"B":"M"!==d()&&p("B");break;case"C":s(n())?"I"===n()&&"A"===y(2)?p(r):"S"!==d()&&p("S"):"H"===n()?(p(r),t++):p("K");break;case"D":"G"===n()&&s(y(2))?(p("J"),t++):p("T");break;case"G":"H"===n()?o(y(-3))||"H"===y(-4)||(p("F"),t++):"N"===n()?!c(y(2))||"E"===y(2)&&"D"===y(3)||p("K"):s(n())&&"G"!==d()?p("J"):p("K");break;case"H":a(n())&&!u(d())&&p("H");break;case"K":"C"!==d()&&p("K");break;case"P":"H"===n()?p("F"):p("P");break;case"Q":p("K");break;case"S":"I"!==n()||"O"!==y(2)&&"A"!==y(2)?"H"===n()?(p(r),t++):p("S"):p(r);break;case"T":"I"!==n()||"O"!==y(2)&&"A"!==y(2)?"H"===n()?(p(i),t++):"C"===n()&&"H"===y(2)||p("T"):p(r);break;case"V":p("F");break;case"W":a(n())&&p("W");break;case"X":p("KS");break;case"Y":a(n())&&p("Y");break;case"Z":p("S");break;case"F":case"J":case"L":case"M":case"N":case"R":p(f())}h+=t}return l};var r="X",i="0";function o(e){return"B"===(e=f(e))||"D"===e||"H"===e}function s(e){return"E"===(e=f(e))||"I"===e||"Y"===e}function a(e){return"A"===(e=f(e))||"E"===e||"I"===e||"O"===e||"U"===e}function u(e){return"C"===(e=f(e))||"G"===e||"P"===e||"S"===e||"T"===e}function c(e){var t=function(e){return f(e).charCodeAt(0)}(e);return t>=65&&t<=90}function f(e){return String(e).charAt(0).toUpperCase()}},,,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.Promise="undefined"!=typeof window&&window.Promise?window.Promise:"undefined"!=typeof global&&global.Promise?global.Promise:r.Promise,t._assign=function(e){return e?JSON.parse(JSON.stringify(e)):null},t.fastCHAIN=function(e,n){return new t.Promise(function(t,i){if(e&&e.length){var o=[],s=function(){o.length<e.length?n(e[o.length],o.length,function(e){o.push(e),r.setFast(s)}):t(o)};s()}else t([])})},t.fastRACE=function(e,n){return new t.Promise(function(t,r){if(e&&e.length){var i=!1,o=0,s=function(){o<e.length&&(n(e[o],o,function(e){i||(i=!0,t([e]))}),o++,s())};s()}else t([])})},t.fastALL=function(e,n){return t.Promise.all((e||[]).map(function(e,r){return new t.Promise(function(t,i){n(e,r,function(e){t(e)})})}))};var i="undefined"==typeof window?"":navigator.userAgent||"";t.isSafari=0!==i.length&&(/^((?!chrome|android).)*safari/i.test(i)||/iPad|iPhone|iPod/.test(i)&&!window.MSStream),t.isMSBrowser=0!==i.length&&(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0||i.indexOf("Edge/")>0),t.isAndroid=/Android/.test(i),t.random16Bits=function(){if("undefined"==typeof crypto)return Math.round(Math.random()*Math.pow(2,16));if(crypto.getRandomValues){var e=new Uint16Array(1);return crypto.getRandomValues(e),e[0]}return"undefined"!=typeof global&&global._crypto.randomBytes?global._crypto.randomBytes(2).reduce(function(e,t){return t*e}):Math.round(Math.random()*Math.pow(2,16))},t.timeid=function(e){for(var n=Math.round((new Date).getTime()/(e?1:1e3)).toString();n.length<(e?13:10);)n="0"+n;return n+"-"+(t.random16Bits()+t.random16Bits()).toString(16)},t.intersect=function(e,t){return!(!e||!t)&&!(!e.length||!t.length)&&(e||[]).filter(function(e){return-1!==(t||[]).indexOf(e)}).length>0},t.uuid=function(){var e,n,r="";return[r,r,r,r,r,r,r,r].reduce(function(i,o,s){for(e=t.random16Bits(),n=3===s?4:4===s?(e%16&3|8).toString(16):r,e=e.toString(16);e.length<4;)e="0"+e;return i+([2,3,4,5].indexOf(s)>-1?"-":r)+(n+e).slice(0,4)},r)};var o={int:function(e){return e},uuid:t.uuid,timeId:function(){return t.timeid()},timeIdms:function(){return t.timeid(!0)}};t.hash=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString(16)},t.generateID=function(e,t){return o[e]?o[e](t||1):""},t.cleanArgs=function(e,n){for(var r={},i=e.length;i--;){var o=e[i].split(":");o.length>1?r[o[0]]=t.cast(o[1],n[o[0]]||void 0):r[o[0]]=n[o[0]]||void 0}return r},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.levenshtein=function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var n,r,i,o,s,a;for(e.length>t.length&&(n=e,e=t,t=n),a=Array(e.length+1),r=0;r<=e.length;r++)a[r]=r;for(r=1;r<=t.length;r++){for(o=r,i=1;i<=e.length;i++)s=t[r-1]===e[i-1]?a[i-1]:Math.min(a[i-1]+1,Math.min(o+1,a[i]+1)),a[i-1]=o,o=s;a[e.length]=o}return a[e.length]},t.cast=function(e,n){if("any"===e||"blob"===e)return n;var r=typeof n;if("undefined"===r||null===n)return n;var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},o=function(e,n){switch(e){case"safestr":return o("string",n).replace(/[&<>"'`=\/]/gim,function(e){return i[e]});case"int":return"number"!==r||n%1!=0?parseInt(n||0):n;case"number":case"float":return"number"!==r?parseFloat(n||0):n;case"any[]":case"array":return Array.isArray(n)?n:[];case"uuid":case"timeId":case"timeIdms":case"string":return"string"!==r?String(n):n;case"object":case"obj":case"map":return t.isObject(n)?n:{};case"boolean":case"bool":return!0===n}return n},s=o(String(e||"").toLowerCase(),n);if(-1!==e.indexOf("[]")){var a=e.slice(0,e.lastIndexOf("[]"));return(n||[]).map(function(e){return t.cast(a,e)})}return void 0!==s?["int","float","number"].indexOf(e)>-1&&isNaN(s)?0:s:void 0},t.sortedInsert=function(e,n,r,i){return e.length?(e.splice(t.binarySearch(e,n),0,n),e):(e.push(n),e)},t.binarySearch=function(e,t,n,r){var i,o=0,s=e.length-1;if(t<e[o])return 0;if(t>e[s])return s+1;if(s<=2147483647)for(;o<=s;){if(e[i=o+s>>1]===t)return i;e[i]<t?o=i+1:s=i-1}else for(;o<=s;){if(e[i=Math.floor((o+s)/2)]===t)return i;e[i]<t?o=i+1:s=i-1}return i},t.removeDuplicates=function(e){if(!e.length)return[];for(var t=[e[0]],n=1;n<e.length;n++)e[n]!==e[n-1]&&t.push(e[n]);return t},t.deepFreeze=function(e){return Object.getOwnPropertyNames(e||{}).forEach(function(n){var r=e[n];"object"==typeof r&&null!==r&&(e[n]=t.deepFreeze(r))}),Object.freeze(e)};var s={};t.objQuery=function(e,t,n){var r=function(e,t,n){return e[t]&&n?r(e,t+1,n[e[t]]):n},i=e+(n?"1":"0");if(s[i])return r(s[i],0,t);var o=[];if(o=e.indexOf("[")>-1?[].concat.apply([],e.split(".").map(function(e){return e.match(/([^\[]+)|\[([^\]]+)\]\[/gim)||e})).map(function(e){return e.replace(/\[|\]/gim,"")}):e.split("."),n){var a=o.shift()+"."+o.shift();o.unshift(a)}return s[i]=o,r(s[i],0,t)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.myConsole=Object.create(console,{assert:{value:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if("undefined"==typeof window)try{console.assert.apply(console,[e,t].concat(n))}catch(e){console.error(e.stack)}else console.assert.apply(console,[e,t].concat(n))},configurable:!0,enumerable:!0,writable:!0}}),t.equals=function(e,t){var n=function(e,t){var r,i,o,s,a;if((r=toString.call(e))!==toString.call(t))return!1;switch(r){default:return e.valueOf()===t.valueOf();case"[object Number]":return t=+t,(e=+e)?e===t:e==e?1/e==1/t:t!=t;case"[object RegExp]":return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex;case"[object Function]":return!1;case"[object Array]":if((i=e.length)!==t.length)return!1;for(;i--;)if(!((s=e[i])===(a=t[i])&&0!==s||n(s,a)))return!1;return!0;case"[object Object]":for(o in i=0,e)if(e.hasOwnProperty(o)){if(++i,(s=e[o])===(a=t[o])&&0!==s||n(s,a))continue;return!1}for(o in t)if(t.hasOwnProperty(o)&&--i<0)return!1;return!0}};return e===t&&0!==e||n(e,t)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(11),o=n(10),s=function(){function e(e,t){var n=this;this.adapter=e,this.args=t,new r.Promise(function(e,t){var r=new((i=n.adapter).bind.apply(i,[void 0].concat(n.args)));r.setID("123");var i,o=[{key:"id",type:"int",props:["pk","ai"]}];r.makeTable("test",o),r.makeTable("test2",o),r.makeTable("test3",o),r.makeTable("test4",o),r.makeTable("test5",o),r.connect(function(){r.destroy(e)})}).then(function(){return n.PrimaryKeys()}).then(function(){return console.log("✓ Primary Key Tests Passed"),n.Writes()}).then(function(){return console.log("✓ Write Tests Passed"),n.RangeReads()}).then(function(){return console.log("✓ Range Read Tests Passed (number)"),n.RangeReadsUUID()}).then(function(){return console.log("✓ Range Read Tests Passed (uuid)"),n.Deletes()}).then(function(){console.log("✓ Delete Tests Passed"),console.log("✓ All Tests Passed!******"),process.exit()}).catch(function(e){process.exit(),console.error("Test Failed",e)})}return e.prototype.Deletes=function(){var e,t=new((e=this.adapter).bind.apply(e,[void 0].concat(this.args))),n=[];return new r.Promise(function(e,n){t.setID("123"),t.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),t.connect(e)}).then(function(){return new r.Promise(function(e,r){for(var i=[],s=0;s<100;s++)n.push({id:s+1,name:"Title "+(s+1)}),i.push("Title "+(s+1));o.fastCHAIN(i,function(e,n,r){t.write("test",null,{name:e},r)}).then(e)})}).then(function(){return new r.Promise(function(e,r){t.delete("test",3,function(){var o=[];t.rangeRead("test",function(e,t,n){o.push(e),n()},function(){var t=i.equals(o,n.filter(function(e){return 3!==e.id}));i.myConsole.assert(t,"Delete Test"),t?e():r(o)},void 0,void 0)})})}).then(function(){return new r.Promise(function(e,n){t.destroy(e)})})},e.prototype.RangeReads=function(){var e,t=new((e=this.adapter).bind.apply(e,[void 0].concat(this.args))),n=[],s=[];return new r.Promise(function(e,n){t.setID("123"),t.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),t.connect(e)}).then(function(){return new r.Promise(function(e,r){for(var i=[],a=0;a<100;a++)n.push({id:a+1,name:"Title "+(a+1)}),i.push("Title "+(a+1)),s.push(a+1);o.fastCHAIN(i,function(e,n,r){t.write("test",null,{name:e},r)}).then(e)})}).then(function(){return new r.Promise(function(e,r){if(t.batchRead){var o=[10,11,12,20];t.batchRead("test",o,function(t){var s=i.equals(t.sort(function(e,t){return e.id>t.id?1:-1}),n.filter(function(e){return-1!==o.indexOf(e.id)}));i.myConsole.assert(s,"Select Batch Rows"),s?e():r(t)})}else e()})}).then(function(){return new r.Promise(function(e,r){var o=[];t.rangeRead("test",function(e,t,n){o.push(e),n()},function(){var t=i.equals(o,n.filter(function(e){return e.id>10&&e.id<22}));i.myConsole.assert(t,"Select Range Test"),t?e():r(o)},10,20)})}).then(function(){return new r.Promise(function(e,r){var o=[];t.rangeRead("test",function(e,t,n){o.push(e),n()},function(){var t=i.equals(o,n.filter(function(e){return e.id>9&&e.id<21}));i.myConsole.assert(t,"Select Range Test (Primary Key)"),t?e():r({g:o,e:n.filter(function(e){return e.id>9&&e.id<21})})},10,20,!0)})}).then(function(){return new r.Promise(function(e,r){var o=[];console.time("READ"),t.rangeRead("test",function(e,t,n){o.push(e),n()},function(){console.timeEnd("READ");var t=i.equals(o,n);i.myConsole.assert(t,"Select Entire Table Test"),t?e():r({e:n,g:o})},void 0,void 0)})}).then(function(){return new r.Promise(function(e,n){t.getIndex("test",!1,function(t){var r=i.equals(t,s);i.myConsole.assert(r,"Select Index Test"),r?e():n({e:s,g:t})})})}).then(function(){return new r.Promise(function(e,n){t.getIndex("test",!0,function(t){var r=100===t;i.myConsole.assert(r,"Select Index Length Test"),r?e():n(t)})})}).then(function(){return new r.Promise(function(e,n){t.destroy(e)})})},e.prototype.RangeReadsUUID=function(){var e,t=new((e=this.adapter).bind.apply(e,[void 0].concat(this.args))),n=[],s=[];return new r.Promise(function(e,n){t.setID("123"),t.makeTable("test",[{key:"id",type:"uuid",props:["ai","pk"]},{key:"name",type:"string"}]),t.connect(e)}).then(function(){return new r.Promise(function(e,r){for(var i=[],a=0;a<100;a++){var u=o.uuid();n.push({id:u,name:"Title "+u}),i.push("Title "+u),s.push(u)}s.sort(function(e,t){return e>t?1:-1}),n.sort(function(e,t){return e.id>t.id?1:-1}),o.fastCHAIN(n,function(e,n,r){t.write("test",e.id,e,r)}).then(e)})}).then(function(){return new r.Promise(function(e,r){if(t.batchRead){for(var o=[],s=0;s<5;s++)o.push(n[Math.floor(Math.random()*n.length)].id);o=o.filter(function(e,t,n){return n.indexOf(e)===t}),t.batchRead("test",o,function(t){var s=i.equals(t,n.filter(function(e){return-1!==o.indexOf(e.id)}));i.myConsole.assert(s,"Select Batch Rows"),s?e():r({e:n.filter(function(e){return-1!==o.indexOf(e.id)}),g:t})})}else e()})}).then(function(){return new r.Promise(function(e,r){var o=[];t.rangeRead("test",function(e,t,n){o.push(e),n()},function(){var t=i.equals(o,n.filter(function(e,t){return t>9&&t<21}));i.myConsole.assert(t,"Select Range Test"),t?e():r({g:o,e:n.filter(function(e,t){return t>9&&t<21})})},10,20)})}).then(function(){return new r.Promise(function(e,r){var o=[];t.rangeRead("test",function(e,t,n){o.push(e),n()},function(){var t=i.equals(o,n.filter(function(e){return e.id>=n[10].id&&e.id<=n[20].id}));i.myConsole.assert(t,"Select Range Test (Primary Key)"),t?e():r({g:o,e:n.filter(function(e){return e.id>=n[10].id&&e.id<=n[20].id})})},n[10].id,n[20].id,!0)})}).then(function(){return new r.Promise(function(e,r){var o=[];console.time("READ"),t.rangeRead("test",function(e,t,n){o.push(e),n()},function(){console.timeEnd("READ");var t=i.equals(o,n);i.myConsole.assert(t,"Select Entire Table Test"),t?e():r(o)},void 0,void 0)})}).then(function(){return new r.Promise(function(e,n){t.getIndex("test",!1,function(t){var r=i.equals(t,s);i.myConsole.assert(r,"Select Index Test"),r?e():n({e:s,g:t})})})}).then(function(){return new r.Promise(function(e,n){t.getIndex("test",!0,function(t){var r=100===t;i.myConsole.assert(r,"Select Index Length Test"),r?e():n(t)})})}).then(function(){return new r.Promise(function(e,n){t.destroy(e)})})},e.prototype.Writes=function(){var e,t=new((e=this.adapter).bind.apply(e,[void 0].concat(this.args)));return new r.Promise(function(e,n){t.setID("123"),t.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"},{key:"posts",type:"string[]"}]),t.connect(e)}).then(function(){return new r.Promise(function(e,n){t.write("test",null,{name:"Test",posts:[1,2]},function(r){t.read("test",r.id,function(t){var r=i.equals(t,{name:"Test",id:1,posts:[1,2]});i.myConsole.assert(r,"Insert Test"),r?e():n(t)})})})}).then(function(){return new r.Promise(function(e,n){t.write("test",1,{name:"Testing",posts:[1,2]},function(r){t.read("test",r.id,function(t){var r=i.equals(t,{name:"Testing",id:1,posts:[1,2]});i.myConsole.assert(r,"Update Test"),r?e():n(t)})})})}).then(function(){return new r.Promise(function(e,n){t.write("test",1,{name:"Testing"},function(r){t.read("test",r.id,function(t){var r=i.equals(t,{name:"Testing",id:1});i.myConsole.assert(r,"Replace Test"),r?e():n(t)})})})}).then(function(){return new r.Promise(function(e,n){t.destroy(e)})})},e.prototype.PrimaryKeys=function(){var e,t=new((e=this.adapter).bind.apply(e,[void 0].concat(this.args)));return new r.Promise(function(e,n){t.setID("123"),t.makeTable("test",[{key:"id",type:"int",props:["ai","pk"]},{key:"name",type:"string"}]),t.makeTable("test2",[{key:"id",type:"uuid",props:["pk"]},{key:"name",type:"string"}]),t.makeTable("test3",[{key:"id",type:"timeId",props:["pk"]},{key:"name",type:"string"}]),t.makeTable("test4",[{key:"id",type:"timeIdms",props:["pk"]},{key:"name",type:"string"}]),t.makeTable("test5",[{key:"id",type:"uuid",props:["pk"]},{key:"name",type:"string"}]),t.connect(e)}).then(function(){return new r.Promise(function(e,n){t.write("test",null,{name:"Test"},function(t){var r=i.equals(t,{name:"Test",id:1});i.myConsole.assert(r,"Test Auto Incriment Integer."),r?e():n(t)})})}).then(function(){return new r.Promise(function(e,n){t.write("test2",null,{name:"Test"},function(t){var r=t.id.match(/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/);i.myConsole.assert(r,"Test UUID."),r?e():n(t.id)})})}).then(function(){return new r.Promise(function(e,n){t.write("test3",null,{name:"Test"},function(t){var r=t.id.match(/^\w{10}-\w{1,5}$/);i.myConsole.assert(r,"Test timeId."),r?e():n(t.id)})})}).then(function(){return new r.Promise(function(e,n){t.write("test4",null,{name:"Test"},function(t){var r=t.id.match(/^\w{13}-\w{1,5}$/);i.myConsole.assert(r,"Test timeIdms."),r?e():n(t.id)})})}).then(function(){return new r.Promise(function(e,n){for(var r=[],s=0;s<20;s++)r.push(o.uuid());o.fastCHAIN(r,function(e,n,r){t.write("test5",e,{name:"Test"},r)}).then(function(){r.sort();var o=[];t.rangeRead("test5",function(e,t,n){o.push(e.id),n()},function(){var t=i.equals(o,r);i.myConsole.assert(t,"Test Sorted Primary Keys."),t?e():n({e:r,g:o})},void 0,void 0)})})}).then(function(){return new r.Promise(function(e,n){t.destroy(e)})})},e}();t.TestAdapter=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(4),o=n(5),s=n(3);n(0).fastCHAIN([i._IndexedDBStore,o._SyncStore,s._WebSQLStore],function(e,t,n){switch(t){case 0:console.log("Testing IndexedDB...");break;case 1:console.log(""),console.log("Testing Sync Store...");break;case 2:console.log(""),console.log("Testing WebSQL...")}new r.TestAdapter(e,[]),setTimeout(n,3e3)}).then(function(){console.log("TESTS COMPLETE")})},function(e,t,n){e.exports=n(13)}])});